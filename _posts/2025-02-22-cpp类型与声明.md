---
title: "[C++读书笔记系列01] C++类型"
date: 2025-02-22
categories: [C/C++]
tags: [cs, lang, note]
math: true
mermaid: false
render_with_liquid: false
---

> 对于大多数应用来说，我们用`bool`表示布尔值、用`char`表示字符、用`int`表示整数值、用`double`表示浮点数。其他基本类型可以看作是上述类型的变形，
> 只有当程序在性能优化、兼容性或其他方面有所要求时才会用到；一般情况下，前面四种类型已经足够了。
{: .prompt-tip }

## 布尔值

一个布尔变量（bool）的取值或者是true或者是false，常用于表示逻辑运算的结果。
根据定义，当我们把布尔值转换成整数时，true转为1，而false转为0。反之，整数值也能在需要的时候隐式地转换成布尔值，其中非0整数对应true，而0对应false。

```cpp
bool b1 = 7;
bool b2{7}; // 错误：发生了窄化转换

int i1 = true;
int i2{true}

bool a = true;
bool b = true;

bool x = a + b; // true
bool y = a || b; // true
bool z = a - b; // false
```
如果你既想使用`{}`初始化器列表防止窄化转换[^narrowing_conversion]的发生，同时又确实想把`int`转换成`bool`，可以显示声明如下。
```cpp
void f(int i)
{
  bool b{i != 0};
}
```
如有必要，指针也能被隐式地转换成`bool`。其中，非空指针对应`true`，值为`nullptr`的指针对应`false`。
```cpp
void g(int *p)
{
  bool b = p; // 窄化成true或false
  bool b2{p != nullptr}; // 显式检查指针是否为空
  
  if (p) // 等价于 p != nullptr
  {}
}
```

> 与`if (p != nullptr)`相比，`if (p)`更好。不但简洁而且直接地表达「p是否有效」的含义，而且使用`if (p)`也不太容易出错。
{: .prompt-tip }

## 字符类型

在C++中，`char` 类型的大小最少应该是 1 字节（byte）。根据 C++ 标准，`char` 的大小至少为 1 字节，但在不同的系统或编译器上，
1 字节可能会有不同的具体实现（比如某些平台上可能使用 8 位）。不过，标准规定了 `sizeof(char)` 始终等于 1。
需要注意的是，char 可以用于存储一个字节的字符数据（通常是 8 位），并且它通常表示 ASCII 字符集中的字符。

```cpp
unsigned char c1 = 64; // 定义良好：在任何情况下，char都至少包含8个二进制位（8bit），肯定能存下64
unsigned char c2 = 1256; // 依赖于实现的：如果当前情况下，char只占8位，则值将被截断。char到底占多少位在不同的实现版本中可能不一样。
```

## 整数类型


## 浮点数类型


## 前缀/后缀


## void

1. 作为函数的返回类型以说明函数不返回任何实际的值。
2. 作为指针的基本类型部分以表明指针所指的类型对象未知。

```cpp
void f();
void *ptr;
```

## size

$$
1 byte = 8 bit
$$

在C++的标准之下，很多重要的功能都是依赖于实现的。大多数依赖于实现的功能都与运行程序的硬件系统密切相关。

C++规定`char`至少占 8 位，`short`至少占 16 位，`long`至少占 32 位。

int的实际类型也是依赖于实现的，并确保是当前机器上最适合保存和操作整数的类型。int通常占据 4 个byte。

> 1. `char` 通常占据 8 位，但也确实存在 `char` 占 32 位的机器。
> 2. 我们绝不能假定 `int` 和指针的尺寸一样大，因为在很多机器上（64 位体系结构）指针的尺寸比整数大。
{: .prompt-warning }



[^narrowing_conversion]: 丢失信息的类型转换。
