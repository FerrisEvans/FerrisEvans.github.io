---
title: "[C++读书笔记系列01] C++类型"
date: 2025-02-22
categories: [C/C++]
tags: [cs, lang, note]
math: true
mermaid: false
render_with_liquid: false
---

## 布尔值

一个布尔变量（bool）的取值或者是true或者是false，常用于表示逻辑运算的结果。
根据定义，当我们把布尔值转换成整数时，true转为1，而false转为0。反之，整数值也能在需要的时候隐式地转换成布尔值，其中非0整数对应true，而0对应false。

```cpp
bool b1 = 7;
bool b2{7}; // 错误：发生了窄化转换

int i1 = true;
int i2{true}

bool a = true;
bool b = true;

bool x = a + b; // true
bool y = a || b; // true
bool z = a - b; // false
```
如果你既想使用`{}`初始化器列表防止窄化转换[^narrowing_conversion]的发生，同时又确实想把`int`转换成`bool`，可以显示声明如下。
```cpp
void f(int i)
{
  bool b{i != 0};
}
```
如有必要，指针也能被隐式地转换成`bool`。其中，非空指针对应`true`，值为`nullptr`的指针对应`false`。
```cpp
void g(int *p)
{
  bool b = p; // 窄化成true或false
  bool b2{p != nullptr}; // 显式检查指针是否为空
  
  if (p) // 等价于 p != nullptr
  {}
}
```

> 与`if (p != nullptr)`相比，`if (p)`更好。不但简洁而且直接地表达「p是否有效」的含义，而且使用`if (p)`也不太容易出错。
{: .prompt-tip }


> 对于大多数应用来说，我们用`bool`表示布尔值、用`char`表示字符、用`int`表示整数值、用`double`表示浮点数。其他基本类型可以看作是上述类型的变形，
> 只有当程序在性能优化、兼容性或其他方面有所要求时才会用到；一般情况下，前面四种类型已经足够了。
{: .prompt-tip }



[^narrowing_conversion]: 丢失信息的类型转换。
