---
title: "[C++读书笔记系列05] 手撕指针第二章·数组"
date: 2025-03-02
categories: [C/C++]
tags: [pointer, array]
math: false
mermaid: false
render_with_liquid: false
---

下标引用和间接访问表达式是等价的。

```c
int main() {
    int a;
    a = 0;
    int arr[] = {1, 2, 3, 4};
    printf("%d\n", *arr); /* 1 */
    printf("%p\n", arr); /* 0x7ff7b82f8110 */
    printf("%d\n", arr[0]); /* 1 */
    printf("%d\n", *(arr + 1)); /* 2 */

    return 0;
}
```

在上述代码中，我们把变量 a 称为标量，因为他是个单一的值，类型是一个整数。而 arr 是一个数组，它是一些值的集合，下标用于标识该集合中某个特定的值。如 `arr[0]` 表示 arr 中的第一个值，`arr[2]` 表示 arr 中的第三个值。

`arr[0]` 的类型是整型，那么 arr 的类型又是什么呢？在 C 语言中，几乎所有使用数组名的表达式中，数组名的值是一个指针常量，也就是数组第一个元素的地址，它的类型取决于数组元素的类型。

但，请不要得出「数组和指针是相同的」的结论。指针只是一个标量值，数组具有确定数量的元素（不过编译器并不会对下标值进行有效性检查）。编译器用数组名来记住这些属性，只有当数组名在表达式当中使用时，编译器才会为它产生一个指针常量。

> 这个值时指针常量，而不是指针变量，常量的值是不能修改的。不难理解，指针常量所指向的是内存中数组的起始位置，如果修改这个指针变量，唯一可行的操作就是把整个数组移动到内存的其他位置。但是，在程序完成链接之后，内存中数组的位置就是固定的。所以，当程序运行时，再想移动数组就为时已晚了。
{: .prompt-tip }
