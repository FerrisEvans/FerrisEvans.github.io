---
title: "[C++读书笔记系列02] 声明"
date: 2025-02-22
categories: [C/C++]
tags: [cs, lang, note]
math: true
mermaid: false
render_with_liquid: false
---

在 C++ 程序中，想要使用某个名字（标识符），必须先对其进行声明。我们必须制定他的类型以便编译器知道这个名字对应的是何种实体。

```c++
char ch; // 为一个 char 类型的变量分配内存空间并赋初始值 0
auto count = 1; // 为一个 int 类型的变量分配内存空间并赋初始值 1
const char *name = "Njal"; // 为一个指向 char 的指针分配内存空间；为字符串字面值常量 "Njal" 分配内存空间；用字符串字面值常量的地址初始化指针。
struct Date{int d, m, y}; // Date 是一个 Struct，包含 3 个成员。
int day(Date *p) { return p->d; } // day 是一个函数，执行某段代码。
using Point = std::complex<short>; // Point 是类型 std::complex<short> 的别名
```
大多数声明同时也是定义。我们可以把定义看成是一种特殊的声明，他提供了在程序中使用改实体所需的一切信息。

```c++
// 以下声明语句并不是定义，也就是说，如果想使用它们，必须现在其他某处进行定义。
double sqrt(double); // 函数声明
extern int error_number; // 变量声明
struct User; // 类型名字声明
```

C++ 中，每个名字都可以对应多个声明语句，但是只能有一个定义。同一实体的所有声明中，类型必须保持一致。

```c++
int count;
int count; // 错误：重定义
extern int error_number;
extern short error_number; // 错误：类型不匹配
extern int err_number;
extern int err_number; // 正确：多次声明
```

## 1. 前置修饰符

指定所声明对象的某些非类型属性。

1. `static`
2. `virtual`
3. `extern`
4. `constexpr`

## 2. 声明符

声明符由一个<u>名字</u>[^name]和一些可选的声明运算符组成

|    |     运算符     | 含义           |
|:--:|:-----------:|:-------------|
| 前缀 |     `*`     | 指针           |
| 前缀 |  `*const`   | 常量指针         |
| 前缀 | `*volitile` | volatile指针   |
| 前缀 |     `&`     | 左值引用         |
| 前缀 |    `&&`     | 右值引用         |
| 前缀 |   `auto`    | 函数（使用后置返回类型） |
| 后缀 |    `[]`     | 数组           |
| 后缀 |    `()`     | 函数           |
| 后缀 |    `->`     | 从函数返回        |

[^name]: [Google开源项目命名约定](https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming.html)
